[gd_scene load_steps=33 format=3 uid="uid://cstvupeueid2r"]

[ext_resource type="Texture2D" uid="uid://bxse0voxioovq" path="res://Assets/Background.jpg" id="1"]
[ext_resource type="PackedScene" uid="uid://mwiq7obbxq4r" path="res://Player/Player.tscn" id="2"]
[ext_resource type="PackedScene" uid="uid://dgyp5t37dwvw5" path="res://BaseScripts/CameraFollower.tscn" id="3"]
[ext_resource type="Script" uid="uid://e3geh0il1edl" path="res://BaseScripts/LevelManager.gd" id="5"]
[ext_resource type="PackedScene" uid="uid://bxs7knefipuv7" path="res://BaseScripts/Spawnpoint.tscn" id="6"]
[ext_resource type="Script" uid="uid://cohv3by8ry4ax" path="res://UI/MoneyLabel.gd" id="7"]
[ext_resource type="PackedScene" uid="uid://y7gksq8cp8b" path="res://Objects/VendingDash.tscn" id="8"]
[ext_resource type="Script" uid="uid://b7stsdo5s8gn6" path="res://BaseScripts/CameraShake.gd" id="9"]
[ext_resource type="PackedScene" uid="uid://bf2vftgapftyk" path="res://Objects/Box.tscn" id="10"]
[ext_resource type="PackedScene" uid="uid://x2nhs72fe8ed" path="res://Objects/Door.tscn" id="12"]
[ext_resource type="PackedScene" uid="uid://cscdv1i7pbh2s" path="res://Objects/VendingGrappling.tscn" id="13"]
[ext_resource type="PackedScene" uid="uid://b6cjfbqh5mcv4" path="res://BaseScripts/WaveSystem.tscn" id="13_dbkhv"]
[ext_resource type="PackedScene" uid="uid://brapdccfdcpx4" path="res://Mobs/PathfindMob/PathfindMob.tscn" id="14"]

[sub_resource type="SegmentShape2D" id="1"]
a = Vector2(-838.515, -526.202)
b = Vector2(-843.037, 614.854)

[sub_resource type="SegmentShape2D" id="2"]
a = Vector2(-852.081, -494.548)
b = Vector2(881.578, -491.924)

[sub_resource type="SegmentShape2D" id="3"]
a = Vector2(841.142, -509.505)
b = Vector2(842.9, 620.945)

[sub_resource type="SegmentShape2D" id="4"]
a = Vector2(878.062, 589.299)
b = Vector2(-908.155, 587.541)

[sub_resource type="RectangleShape2D" id="5"]
size = Vector2(93.0218, 94.3826)

[sub_resource type="OccluderPolygon2D" id="6"]
polygon = PackedVector2Array(44.9525, 56.4104, 40.0893, 138.545, -38.8033, 135.843, -35.5612, 52.0876)

[sub_resource type="OccluderPolygon2D" id="7"]
polygon = PackedVector2Array(-253.601, 1.56584, -254.458, 224.483, -267.319, 287.929, -291.325, 287.929, -292.183, 39.2904, -596.551, 43.5772, -629.131, 30.7166, -642.849, 1.56584)

[sub_resource type="OccluderPolygon2D" id="8"]
polygon = PackedVector2Array(-505.062, 407.729, -495.392, 442.995, -634.18, 436.738, -653.519, 238.227, -614.84, 242.777, -594.363, 402.041)

[sub_resource type="OccluderPolygon2D" id="9"]
polygon = PackedVector2Array(1.63455, 365.084, -13.4596, 442.819, -90.4398, 429.989, -75.723, 352.254)

[sub_resource type="OccluderPolygon2D" id="10"]
polygon = PackedVector2Array(212.312, 252.359, 210.985, 333.959, 310.498, 337.94, 312, 593, 349, 593, 347, 278, 280, 204, 264, 202, 263, 250)

[sub_resource type="OccluderPolygon2D" id="11"]
polygon = PackedVector2Array(513.565, 401.331, 514.134, 440.578, 601.16, 441.147, 600.592, 339.9, 698.994, 338.763, 700.7, 252.874, 662.591, 252.874, 661.453, 303.497, 561.913, 303.497, 559.069, 402.468)

[sub_resource type="OccluderPolygon2D" id="12"]
polygon = PackedVector2Array(700.361, 53.115, 698.507, 88.3251, 532.186, 94.3479, 460.376, 22.0744, 459.912, 4.00607, 507.631, 3.07949, 506.705, -46.956, 595.657, -46.4927, 597.047, 49.4086)

[sub_resource type="OccluderPolygon2D" id="13"]
polygon = PackedVector2Array(551.177, -204.46, 550.664, -228.587, 564.524, -242.447, 606.105, -239.367, 665.139, -249.121, 712.88, -240.394, 714.933, -213.187)

[sub_resource type="OccluderPolygon2D" id="14"]
polygon = PackedVector2Array(224.133, -345.846, 291.678, -353.411, 285.193, -168.068, 214.946, -170.769)

[sub_resource type="OccluderPolygon2D" id="15"]
polygon = PackedVector2Array(562.858, -397.665, 589.876, -405.77, 593.118, -473.855, 694.706, -463.589, 697.408, -500.333, 557.995, -494.929)

[sub_resource type="OccluderPolygon2D" id="16"]
polygon = PackedVector2Array(-93.6845, -497.234, -91.6312, -428.959, -71.0975, -407.912, 46.4579, -415.612, 49.538, -498.774)

[sub_resource type="OccluderPolygon2D" id="17"]
polygon = PackedVector2Array(-442.433, -156.047, -329.216, -160.12, -259.169, -230.167, -322.7, -292.884, -441.618, -173.152)

[sub_resource type="OccluderPolygon2D" id="18"]
polygon = PackedVector2Array(-736.498, -187.445, -738.294, -161.101, -853.851, -160.502, -853.851, -420.354, -779.607, -411.972, -766.435, -343.716, -756.855, -291.027, -744.282, -267.077, -761.047, -208.401, -756.257, -194.63)

[sub_resource type="NavigationPolygon" id="19"]
vertices = PackedVector2Array(67.9279, 166.258, 235.096, 177.311, 236.046, 228.61, 185.696, 231.46, -218.572, 227.469, -64.72, 162.053, 432.02, 39.1755, 296.845, 176.361, 67.9279, 31.9929, 185.409, -148.984, 311.113, -141.021, 431.451, -17.7041, 726.088, 112.55, 727.225, 34.0563, 744.919, -190.249, 819.763, -477.959, 824.415, 572.458, 726.475, 365.882, -822.279, 565.006, -447.001, 472.588, -133.001, 458.744, 10.8551, 484.582, 282.467, 572.894, 724.269, 229.156, 734.549, -472.825, 737.732, -262.629, 730.442, -425.085, 622.641, -438.945, 665.864, -275.976, 625.208, -384.018, -629.566, -222.267, -724.863, -223.896, -696.499, -339.259, -130.858, -475.776, -127.445, -422.309, -322.054, -333.296, 536.4, -359.891, 601.697, -264.683, 544.716, -266.736, 319.076, -384.466, 530.867, -471.208, 89.8354, -467.813, 201.335, -370.815, 93.2481, -422.878, -60.1905, 30.6988, -222.25, -26.3763, -315.769, -137.065, -213.114, -233.435, 64.2395, -375.668, 521.616, -177.415, 623.135, -68.8958, 35.2968, 340.027, 185.696, 359.709, -104.37, 312.792, -239.106, 324.49, -316.107, 318.843, -487.715, 367.81, 523.67, -235.936, 484.918, -72.8774, -658.953, 471.391, -813.476, -126.645, -747.502, -121.758, -680.507, 209.146, 519.046, 120.513, 641.205, 232.096, -746.553, -445.624, -814.24, -449.606, -812.534, -466.101, 626.503, 466.589, 625.033, 362.942, 381.395, 570.608, 490.512, 464.384, 383.295, 260.91, 492.717, 379.114, 642.675, 280.612, 538.292, 280.612, -599.734, 71.8093, -320.435, 71.1459, -567.346, 373.797, -591.894, 217.528, -654.797, 50.58, 536.822, 378.379, 484.349, -18.8417, 285.445, 366.359, -675.363, -23.7226, -626.308, -134.301, -469.402, -128.685, 621.429, 26.0932, -88.7667, -365.43, -467.307, -188.043)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3, 4, 5), PackedInt32Array(6, 7, 1, 0, 8, 9, 10, 11), PackedInt32Array(12, 13, 14, 15, 16, 17), PackedInt32Array(18, 19, 20, 21, 22), PackedInt32Array(12, 17, 23), PackedInt32Array(24, 15, 14, 25, 26), PackedInt32Array(27, 26, 25, 28, 29), PackedInt32Array(30, 31, 32, 33, 34, 35), PackedInt32Array(36, 29, 28, 37, 38), PackedInt32Array(39, 40, 36, 10), PackedInt32Array(41, 40, 39, 42, 43), PackedInt32Array(44, 45, 46, 47, 48, 42, 9, 8), PackedInt32Array(49, 14, 13, 50), PackedInt32Array(51, 3, 52, 21), PackedInt32Array(4, 3, 51, 53), PackedInt32Array(54, 4, 53, 20), PackedInt32Array(55, 54, 20, 19, 56), PackedInt32Array(10, 36, 38, 57), PackedInt32Array(10, 57, 49, 58, 11), PackedInt32Array(59, 18, 60, 61, 62), PackedInt32Array(63, 12, 23, 64), PackedInt32Array(65, 66, 67, 33), PackedInt32Array(32, 65, 33), PackedInt32Array(68, 69, 17, 16), PackedInt32Array(68, 16, 70, 71), PackedInt32Array(71, 70, 72, 73), PackedInt32Array(63, 64, 74, 75, 72), PackedInt32Array(5, 4, 45, 44), PackedInt32Array(76, 77, 55, 56, 78, 79), PackedInt32Array(76, 79, 62, 80), PackedInt32Array(75, 81, 73, 72), PackedInt32Array(6, 63, 72, 7), PackedInt32Array(58, 82, 11), PackedInt32Array(52, 83, 22, 21), PackedInt32Array(59, 19, 18), PackedInt32Array(80, 62, 61, 84), PackedInt32Array(45, 84, 61, 85, 86), PackedInt32Array(13, 87, 50), PackedInt32Array(49, 50, 58), PackedInt32Array(48, 43, 42), PackedInt32Array(88, 48, 47, 35), PackedInt32Array(34, 88, 35), PackedInt32Array(30, 35, 89, 85), PackedInt32Array(85, 89, 86), PackedInt32Array(45, 86, 46)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-812.534, -466.101, -130.858, -475.776, -127.445, -422.309, -88.7667, -365.43, 64.2395, -375.668, 93.2481, -422.878, 89.8354, -467.813, 530.867, -471.208, 536.4, -359.891, 625.208, -384.018, 622.641, -438.945, 730.442, -425.085, 734.549, -472.825, 819.763, -477.959, 824.415, 572.458, 381.395, 570.608, 383.295, 260.91, 296.845, 176.361, 235.096, 177.311, 236.046, 228.61, 185.696, 231.46, 185.696, 359.709, 285.445, 366.359, 282.467, 572.894, -822.279, 565.006, -813.476, -126.645, -747.502, -121.758, -626.308, -134.301, -629.566, -222.267, -724.863, -223.896, -696.499, -339.259, -746.553, -445.624, -814.24, -449.606), PackedVector2Array(201.335, -370.815, 185.409, -148.984, 311.113, -141.021, 319.076, -384.466), PackedVector2Array(-60.1905, 30.6988, 67.9279, 31.9929, 67.9279, 166.258, -64.72, 162.053), PackedVector2Array(-322.054, -333.296, -213.114, -233.435, -315.769, -137.065, -469.402, -128.685, -467.307, -188.043), PackedVector2Array(-316.107, 318.843, -239.106, 324.49, -218.572, 227.469, -222.25, -26.3763, -675.363, -23.7226, -654.797, 50.58, -599.734, 71.8093, -320.435, 71.1459), PackedVector2Array(-591.894, 217.528, -567.346, 373.797, -487.715, 367.81, -447.001, 472.588, -658.953, 471.391, -680.507, 209.146), PackedVector2Array(35.2968, 340.027, 10.8551, 484.582, -133.001, 458.744, -104.37, 312.792), PackedVector2Array(490.512, 464.384, 626.503, 466.589, 625.033, 362.942, 726.475, 365.882, 724.269, 229.156, 641.205, 232.096, 642.675, 280.612, 538.292, 280.612, 536.822, 378.379, 492.717, 379.114), PackedVector2Array(623.135, -68.8958, 621.429, 26.0932, 727.225, 34.0563, 726.088, 112.55, 519.046, 120.513, 432.02, 39.1755, 431.451, -17.7041, 484.349, -18.8417, 484.918, -72.8774), PackedVector2Array(521.616, -177.415, 744.919, -190.249, 737.732, -262.629, 665.864, -275.976, 601.697, -264.683, 544.716, -266.736, 523.67, -235.936)])
source_geometry_group_name = &"navigation_polygon_source_group"

[node name="Main" type="Node"]
script = ExtResource("5")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Label" type="Label" parent="CanvasLayer"]
light_mask = 0
offset_left = 502.127
offset_top = 12.956
offset_right = 542.127
offset_bottom = 26.956
text = "test"
script = ExtResource("7")

[node name="Player" parent="." instance=ExtResource("2")]
position = Vector2(50.1047, -18.0821)

[node name="CameraFollower" parent="Player" instance=ExtResource("3")]

[node name="Camera2D" type="Camera2D" parent="Player/CameraFollower"]
zoom = Vector2(2, 2)
position_smoothing_enabled = true
script = ExtResource("9")

[node name="ShadowLight" type="PointLight2D" parent="Player"]
position = Vector2(0.723709, -0.513878)
color = Color(0, 0, 0, 1)
energy = 0.0
range_layer_max = 1
range_item_cull_mask = 4
shadow_enabled = true
shadow_color = Color(0, 0, 0, 0.737255)
shadow_filter_smooth = 1.5
shadow_item_cull_mask = 4

[node name="CullLight" type="PointLight2D" parent="Player"]
position = Vector2(0.326492, -0.513878)
range_layer_max = 1
range_item_cull_mask = 2
shadow_enabled = true
shadow_color = Color(1, 1, 1, 0)
shadow_filter = 2
shadow_filter_smooth = 13.0

[node name="Spawnpoints" type="Node" parent="."]

[node name="Spawnpoint" parent="Spawnpoints" instance=ExtResource("6")]
position = Vector2(-360.911, 104.956)
mob_scene = ExtResource("14")
spawn_time = 1.25
spawn_amount = null
endless_spawn = null

[node name="Spawnpoint2" parent="Spawnpoints" instance=ExtResource("6")]
position = Vector2(644.206, -397.593)
mob_scene = ExtResource("14")
spawn_time = 1.25
spawn_amount = null
endless_spawn = null

[node name="Spawnpoint3" parent="Spawnpoints" instance=ExtResource("6")]
position = Vector2(-684.927, -257.474)
mob_scene = ExtResource("14")
spawn_time = 1.25
spawn_amount = null
endless_spawn = null

[node name="Spawnpoint4" parent="Spawnpoints" instance=ExtResource("6")]
position = Vector2(556.021, 231.89)
mob_scene = ExtResource("14")
spawn_time = 1.25
spawn_amount = null
endless_spawn = null

[node name="Spawnpoint5" parent="Spawnpoints" instance=ExtResource("6")]
position = Vector2(-153.808, -436.184)
mob_scene = ExtResource("14")
spawn_time = 1.25
spawn_amount = null
endless_spawn = null

[node name="LevelBoundry" type="StaticBody2D" parent="."]
visible = false
collision_layer = 4
collision_mask = 7

[node name="CollisionShape2D3" type="CollisionShape2D" parent="LevelBoundry"]
shape = SubResource("1")

[node name="CollisionShape2D4" type="CollisionShape2D" parent="LevelBoundry"]
shape = SubResource("2")

[node name="CollisionShape2D5" type="CollisionShape2D" parent="LevelBoundry"]
shape = SubResource("3")

[node name="CollisionShape2D6" type="CollisionShape2D" parent="LevelBoundry"]
shape = SubResource("4")

[node name="Walls" type="StaticBody2D" parent="."]
collision_layer = 4
collision_mask = 3

[node name="CollisionShape2D" type="CollisionShape2D" parent="Walls"]
position = Vector2(2.84399, 94.9896)
rotation = 0.0300979
shape = SubResource("5")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="Walls"]
position = Vector2(-45.169, 399.358)
rotation = 0.179167
shape = SubResource("5")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Walls"]
polygon = PackedVector2Array(-247.335, -4.59378, -648.879, -2.49878, -636.309, 35.2114, -602.091, 48.4798, -297.616, 47.7815, -296.219, 295.691, -262, 295.691, -244.542, 225.159)

[node name="CollisionPolygon2D6" type="CollisionPolygon2D" parent="Walls"]
polygon = PackedVector2Array(542.854, -196.077, 719.324, -207.422, 716.173, -245.237, 665.753, -254.69, 603.358, -245.867, 559.241, -247.127, 544.115, -231.371)

[node name="CollisionPolygon2D5" type="CollisionPolygon2D" parent="Walls"]
polygon = PackedVector2Array(704.887, 47.1945, 705.914, 95.4486, 529.324, 98.0154, 456.943, 24.0941, 454.89, -2.08636, 502.63, -2.59971, 503.657, -51.3672, 603.245, -52.3939, 605.812, 43.0877)

[node name="CollisionPolygon2D4" type="CollisionPolygon2D" parent="Walls"]
polygon = PackedVector2Array(508.49, 446.702, 607.565, 446.702, 607.052, 345.573, 706.64, 346.6, 705.1, 247.525, 656.846, 247.011, 656.846, 295.266, 556.744, 296.292, 554.691, 396.907, 507.463, 397.934)

[node name="CollisionPolygon2D3" type="CollisionPolygon2D" parent="Walls"]
polygon = PackedVector2Array(357.017, 597.008, 354.224, 272.281, 280.898, 196.162, 257.155, 194.766, 255.06, 243.649, 204.779, 245.744, 203.383, 344.21, 305.34, 348.4, 304.642, 594.913)

[node name="CollisionPolygon2D2" type="CollisionPolygon2D" parent="Walls"]
polygon = PackedVector2Array(-658.051, 234.686, -637.799, 441.393, -485.561, 449.773, -500.226, 400.89, -588.915, 398.096, -609.865, 238.876)

[node name="CollisionPolygon2D7" type="CollisionPolygon2D" parent="Walls"]
polygon = PackedVector2Array(301.469, -364.984, 294.536, -158.892, 206.931, -164.565, 215.755, -355.53)

[node name="CollisionPolygon2D8" type="CollisionPolygon2D" parent="Walls"]
polygon = PackedVector2Array(-99.6367, -505.184, -97.746, -426.403, -72.536, -401.823, 50.9929, -409.386, 65.4886, -434.596, 56.6651, -503.293)

[node name="CollisionPolygon2D9" type="CollisionPolygon2D" parent="Walls"]
polygon = PackedVector2Array(554.766, -502.27, 558.18, -390.592, 595.243, -398.883, 597.682, -461.793, 707.409, -453.99, 705.946, -507.634)

[node name="CollisionPolygon2D10" type="CollisionPolygon2D" parent="Walls"]
polygon = PackedVector2Array(-448.8, -173.713, -448.8, -153.461, -323.099, -156.254, -246.282, -230.976, -321.004, -301.508)

[node name="CollisionPolygon2D11" type="CollisionPolygon2D" parent="Walls"]
polygon = PackedVector2Array(-858.187, -429.327, -766.171, -421.764, -730.877, -336.05, -748.524, -296.345, -732.767, -270.504, -754.826, -204.958, -652.095, -200.547, -652.095, -158.32, -745.372, -146.976, -858.817, -157.69)

[node name="LightOccluder2D" type="LightOccluder2D" parent="Walls"]
light_mask = 5
occluder = SubResource("6")

[node name="LightOccluder2D2" type="LightOccluder2D" parent="Walls"]
light_mask = 5
occluder = SubResource("7")

[node name="LightOccluder2D3" type="LightOccluder2D" parent="Walls"]
light_mask = 5
occluder = SubResource("8")

[node name="LightOccluder2D4" type="LightOccluder2D" parent="Walls"]
light_mask = 5
occluder = SubResource("9")

[node name="LightOccluder2D5" type="LightOccluder2D" parent="Walls"]
light_mask = 5
occluder = SubResource("10")

[node name="LightOccluder2D6" type="LightOccluder2D" parent="Walls"]
light_mask = 5
occluder = SubResource("11")

[node name="LightOccluder2D7" type="LightOccluder2D" parent="Walls"]
light_mask = 5
occluder = SubResource("12")

[node name="LightOccluder2D8" type="LightOccluder2D" parent="Walls"]
light_mask = 5
occluder = SubResource("13")

[node name="LightOccluder2D9" type="LightOccluder2D" parent="Walls"]
light_mask = 5
occluder = SubResource("14")

[node name="LightOccluder2D10" type="LightOccluder2D" parent="Walls"]
light_mask = 5
occluder = SubResource("15")

[node name="LightOccluder2D11" type="LightOccluder2D" parent="Walls"]
light_mask = 5
occluder = SubResource("16")

[node name="LightOccluder2D12" type="LightOccluder2D" parent="Walls"]
light_mask = 5
occluder = SubResource("17")

[node name="LightOccluder2D13" type="LightOccluder2D" parent="Walls"]
light_mask = 5
occluder = SubResource("18")

[node name="Background" type="Sprite2D" parent="."]
modulate = Color(0.854902, 0.854902, 0.854902, 1)
light_mask = 4
z_index = -100
position = Vector2(2.51758, 45.9825)
texture = ExtResource("1")

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]
volume_db = -36.006
autoplay = true

[node name="Box" parent="." instance=ExtResource("10")]
position = Vector2(-46.2134, -35.2102)

[node name="Door" parent="." instance=ExtResource("12")]
position = Vector2(274.124, -40.0406)
rotation = 1.12289
scale = Vector2(0.2, 0.2)

[node name="Payable" parent="." instance=ExtResource("8")]
position = Vector2(161.812, 62.7177)
scale = Vector2(0.2, 0.2)
price = 2000

[node name="Payable2" parent="." instance=ExtResource("13")]
position = Vector2(265.294, 102.899)
scale = Vector2(0.2, 0.2)

[node name="Navigation2D" type="Node2D" parent="."]

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="."]
visible = false
position = Vector2(0, 1.23869)
navigation_polygon = SubResource("19")

[node name="WaveSystem" parent="." instance=ExtResource("13_dbkhv")]

[node name="PathfindMob" parent="." instance=ExtResource("14")]
position = Vector2(114, -114)

[editable path="Spawnpoints/Spawnpoint"]
[editable path="Spawnpoints/Spawnpoint2"]
[editable path="Spawnpoints/Spawnpoint3"]
[editable path="Spawnpoints/Spawnpoint4"]
[editable path="Spawnpoints/Spawnpoint5"]
